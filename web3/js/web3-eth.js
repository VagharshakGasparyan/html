/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/web3-eth@4.10.0/lib/esm/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import"/npm/setimmediate@1.0.5/+esm";import{ETH_DATA_FORMAT as t,HardforksOrdered as e,DEFAULT_RETURN_FORMAT as n,FMT_BYTES as r,FMT_NUMBER as i}from"/npm/web3-types@1.8.1/+esm";import{Web3PromiEvent as o,Web3Subscription as a,Web3Context as s,isSupportedProvider as u}from"/npm/web3-core@4.7.0/+esm";import{InvalidPropertiesForTransactionTypeError as c,TransactionDataAndInputError as d,UnsupportedTransactionTypeError as l,Eip1559NotSupportedError as f,LocalWalletNotAvailableError as m,InvalidTransactionWithSender as h,InvalidTransactionWithReceiver as v,UnableToPopulateNonceError as g,TransactionBlockTimeoutError as y,TransactionSendTimeoutError as p,TransactionPollingTimeoutError as b,TransactionMissingReceiptOrBlockHashError as w,TransactionReceiptMissingBlockNumberError as x,ContractExecutionError as P,Eip838ExecutionError as F,InvalidResponseError as k,TransactionRevertedWithoutReasonError as R,TransactionRevertInstructionError as B,TransactionRevertWithCustomError as C,SignatureError as S,TransactionNotFound as G,InvalidTransactionCall as I,MissingCustomChainError as j,MissingCustomChainIdError as O,ChainIdMismatchError as T,CommonOrChainAndHardforkError as M,MissingChainOrHardforkError as H,ChainMismatchError as q,HardforkMismatchError as E,InvalidGasOrGasPrice as A,UnsupportedFeeMarketError as L,Eip1559GasPriceError as N,InvalidMaxPriorityFeePerGasOrMaxFeePerGas as D,MissingGasError as U,TransactionGasMismatchError as W,InvalidTransactionObjectError as _,InvalidNonceOrChainIdError as z}from"/npm/web3-errors@1.3.0/+esm";import{format as K,toHex as V,mergeDeep as J,bytesToHex as $,hexToBytes as X,keccak256 as Q,rejectIfConditionAtInterval as Y,rejectIfTimeout as Z,pollTillDefinedAndReturnIntervalId as tt,numberToHex as et,bytesToUint8Array as nt,ethUnitMap as rt,toChecksumAddress as it,isNullish as ot,toNumber as at}from"/npm/web3-utils@4.3.2/+esm";import{ethRpcMethods as st}from"/npm/web3-rpc-methods@1.3.0/+esm";import{TransactionFactory as ut,privateKeyToAddress as ct,Common as dt}from"/npm/web3-eth-accounts@4.2.1/+esm";import{isNullish as lt,validator as ft,Web3ValidatorError as mt,isAddress as ht,isHexStrict as vt,isNumber as gt,isBlockTag as yt,isBytes as pt,isString as bt,isHexString32Bytes as wt,isUInt as xt}from"/npm/web3-validator@2.0.6/+esm";import{getId as Pt}from"/npm/web3-net@4.1.0/+esm";import{isAbiErrorFragment as Ft,decodeContractErrorData as kt,decodeLog as Rt}from"/npm/web3-eth-abi@4.3.0/+esm";const Bt={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},Ct={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},St={type:"object",properties:{gasPrice:{type:"null"}}},Gt=(t,e,n)=>{try{ft.validateJSONSchema(t,e)}catch(t){if(t instanceof mt)throw new c(t.errors,n);throw t}},It=n=>{var r,i;const o=n;if(!lt(o.type)){let e;switch(o.type){case"0x0":e=Bt;break;case"0x1":e=Ct;break;case"0x2":e=St;break;default:return K({format:"uint"},o.type,t)}return Gt(e,o,o.type),K({format:"uint"},o.type,t)}if(!lt(o.maxFeePerGas)||!lt(o.maxPriorityFeePerGas))return Gt(St,o,"0x2"),"0x2";if(!lt(o.accessList))return Gt(Ct,o,"0x1"),"0x1";const a=null!==(r=o.hardfork)&&void 0!==r?r:null===(i=o.common)||void 0===i?void 0:i.hardfork;if(!lt(a)){const t=Object.keys(e).indexOf(a);if(t>=Object.keys(e).indexOf("london"))return lt(o.gasPrice)?"0x2":"0x0";if(t===Object.keys(e).indexOf("berlin"))return"0x0"}return lt(o.gasPrice)?void 0:(Gt(Bt,o,"0x0"),"0x0")},jt=(t,e)=>{var n;return(null!==(n=null==e?void 0:e.transactionTypeParser)&&void 0!==n?n:It)(t)},Ot=t=>t[0]>127?"0x0":V(t[0]),Tt={type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}},Mt={type:"array",items:Object.assign({},Tt)},Ht={type:"object",properties:{accessList:Object.assign({},Mt),gasUsed:{type:"string"}}},qt={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},Et={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},At={type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}},Lt={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},Mt),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},qt),hardfork:Object.assign({},Et),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},At),baseChain:Object.assign({},qt),hardfork:Object.assign({},Et)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},Nt={type:"object",properties:Object.assign(Object.assign({},Lt.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},Mt),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},Dt={type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}},Ut={type:"object",properties:{baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},Nt)},{type:"array",items:{format:"bytes32"}}]},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},Dt)},withdrawalsRoot:{format:"bytes32"}}},Wt={type:"object",properties:{author:{format:"bytes32"},excessDataGas:{format:"uint"},baseFeePerGas:{format:"uint"},blobGasUsed:{format:"uint"},difficulty:{format:"uint"},excessBlobGas:{format:"uint"},extraData:{format:"bytes"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},hash:{format:"bytes32"},logsBloom:{format:"bytes256"},miner:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},number:{format:"uint"},parentBeaconBlockRoot:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},stateRoot:{format:"bytes32"},timestamp:{format:"uint"},totalDifficulty:{format:"uint"},transactions:{type:"array",items:{format:"bytes32"}},transactionsRoot:{format:"bytes32"},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},Dt)},withdrawalsRoot:{format:"bytes32"}}},_t={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},zt={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},Kt={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},_t)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},Vt={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},Jt={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},$t={type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}},Xt={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},$t)}}};function Qt(t,e=n,r={transactionSchema:Nt,fillInputAndData:!1}){var i,o;let a=J({},t);if(lt(null==t?void 0:t.common)||(a.common=Object.assign({},t.common),lt(null===(i=t.common)||void 0===i?void 0:i.customChain)||(a.common.customChain=Object.assign({},t.common.customChain))),a=K(null!==(o=r.transactionSchema)&&void 0!==o?o:Nt,a,e),!lt(a.data)&&!lt(a.input)&&V(a.data)!==V(a.input))throw new d({data:$(a.data),input:$(a.input)});return r.fillInputAndData&&(lt(a.data)?lt(a.input)||(a.data=a.input):a.input=a.data),lt(a.gasLimit)||(a.gas=a.gasLimit,delete a.gasLimit),a}const Yt="ALLEVENTS",Zt={name:Yt,signature:"",type:"event",inputs:[]},te={bytes:r.HEX,number:i.NUMBER};var ee=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function ne(e,n,r){return ee(this,void 0,void 0,(function*(){const i=oe(e,n);if(!lt(i)){if(i.startsWith("-"))throw new l(i);if(Number(i)<0||Number(i)>127)throw new l(i);if(lt(e.gasPrice)&&("0x0"===i||"0x1"===i))return{gasPrice:yield Me(n,r),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if("0x2"===i)return Object.assign({gasPrice:void 0},yield function(e,n,r){var i,o,a,s;return ee(this,void 0,void 0,(function*(){const u=yield Ne(n,n.defaultBlock,!1,t);if(lt(u.baseFeePerGas))throw new f;let c;if(lt(e.gasPrice)&&BigInt(u.baseFeePerGas)===BigInt(0)&&(c=yield Me(n,r)),!lt(e.gasPrice)||!lt(c)){const t=K({format:"uint"},null!==(i=e.gasPrice)&&void 0!==i?i:c,r);return{maxPriorityFeePerGas:t,maxFeePerGas:t}}return{maxPriorityFeePerGas:K({format:"uint"},null!==(o=e.maxPriorityFeePerGas)&&void 0!==o?o:n.defaultMaxPriorityFeePerGas,r),maxFeePerGas:K({format:"uint"},null!==(a=e.maxFeePerGas)&&void 0!==a?a:BigInt(u.baseFeePerGas)*BigInt(2)+BigInt(null!==(s=e.maxPriorityFeePerGas)&&void 0!==s?s:n.defaultMaxPriorityFeePerGas),r)}}))}(e,n,r))}}))}var re=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};const ie=(t,e,n,r)=>{if(void 0!==n&&t in n&&void 0!==n[t]){if("string"==typeof n[t]&&ht(n[t]))return n[t];if(!vt(n[t])&&gt(n[t])){if(e.wallet){const r=e.wallet.get(K({format:"uint"},n[t],te));if(!lt(r))return r.address;throw new m}throw new m}throw"from"===t?new h(n.from):new v(n.to)}if("from"===t){if(!lt(r))return ct(r);if(!lt(e.defaultAccount))return e.defaultAccount}},oe=(e,n)=>{const r=jt(e,n);return lt(r)?lt(n.defaultTransactionType)?void 0:K({format:"uint"},n.defaultTransactionType,t):r};function ae(e){var n,r;return re(this,void 0,void 0,(function*(){let i=K(Lt,e.transaction,e.web3Context.defaultReturnFormat);if(lt(i.from)&&(i.from=ie("from",e.web3Context,void 0,e.privateKey)),lt(i.nonce)&&(i.nonce=yield((t,e,n=t.defaultReturnFormat)=>re(void 0,void 0,void 0,(function*(){if(lt(e))throw new g;return Je(t,e,t.defaultBlock,n)})))(e.web3Context,i.from,t)),lt(i.value)&&(i.value="0x0"),lt(i.data))lt(i.input)?i.input="0x":i.input.startsWith("0x")||(i.input=`0x${i.input}`);else{if(!lt(i.input)&&i.data!==i.input)throw new d({data:$(i.data),input:$(i.input)});i.data.startsWith("0x")||(i.data=`0x${i.data}`)}if(lt(i.common)){if(e.web3Context.defaultCommon){const t=e.web3Context.defaultCommon,n=t.customChain.chainId,r=t.customChain.networkId,o=t.customChain.name;i.common=Object.assign(Object.assign({},t),{customChain:{chainId:n,networkId:r,name:o}})}lt(i.chain)&&(i.chain=e.web3Context.defaultChain),lt(i.hardfork)&&(i.hardfork=e.web3Context.defaultHardfork)}if(lt(i.chainId)&&lt(null===(n=i.common)||void 0===n?void 0:n.customChain.chainId)&&(i.chainId=yield nn(e.web3Context,t)),lt(i.networkId)&&(i.networkId=null!==(r=e.web3Context.defaultNetworkId)&&void 0!==r?r:yield Pt(e.web3Context,t)),lt(i.gasLimit)&&!lt(i.gas)&&(i.gasLimit=i.gas),i.type=oe(i,e.web3Context),!lt(i.accessList)||"0x1"!==i.type&&"0x2"!==i.type||(i.accessList=[]),e.fillGasPrice&&(i=Object.assign(Object.assign({},i),yield ne(i,e.web3Context,t))),lt(i.gas)&&lt(i.gasLimit)&&e.fillGasLimit){const n=yield tn(e.web3Context,i,"latest",t);i=Object.assign(Object.assign({},i),{gas:K({format:"uint"},n,t)})}return i}))}const se=t=>re(void 0,void 0,void 0,(function*(){var e;return(null!==(e=t.web3Context.transactionBuilder)&&void 0!==e?e:ae)(Object.assign(Object.assign({},t),{transaction:t.transaction}))}));var ue=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function ce(t,e,n){const r=t.transactionPollingInterval,[i,o]=Y((()=>ue(this,void 0,void 0,(function*(){let r;try{r=yield qe(t,te)}catch(t){return void console.warn("An error happen while trying to get the block number",t)}const i=r-e;if(i>=t.transactionBlockTimeout)return new y({starterBlockNumber:e,numberOfBlocks:i,transactionHash:n})}))),r);return[o,{clean:()=>{clearInterval(i)}}]}function de(t,e){var n,r;return ue(this,void 0,void 0,(function*(){const{provider:i}=t.requestManager;let o;const a=yield qe(t,te);return o=(null===(r=(n=i).supportsSubscriptions)||void 0===r?void 0:r.call(n))&&t.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?yield function(t,e,n){var r;return ue(this,void 0,void 0,(function*(){let i,o,a=!0;function s(r,i){i&&console.warn("error happened at subscription. So revert to polling...",i),o.clean(),a=!1;const[s,u]=ce(t,e,n);o.clean=u.clean,s.catch((t=>r(t)))}try{i=yield null===(r=t.subscriptionManager)||void 0===r?void 0:r.subscribe("newHeads"),o={clean:()=>{var e;i.id&&(null===(e=t.subscriptionManager)||void 0===e||e.removeSubscription(i).then((()=>{})).catch((()=>{})))}}}catch(r){return ce(t,e,n)}return[new Promise(((r,o)=>{try{i.on("data",(r=>{if(a=!1,!(null==r?void 0:r.number))return;const i=Number(BigInt(r.number)-BigInt(e));i>=t.transactionBlockTimeout&&o(new y({starterBlockNumber:e,numberOfBlocks:i,transactionHash:n}))})),i.on("error",(t=>{s(o,t)}))}catch(t){s(o,t)}setTimeout((()=>{a&&s(o)}),1e3*t.blockHeaderTimeout)})),o]}))}(t,a,e):ce(t,a,e),o}))}var le=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function fe(t,e,n){return le(this,void 0,void 0,(function*(){const[r,i]=Z(t.transactionSendTimeout,new p({numberOfSeconds:t.transactionSendTimeout/1e3,transactionHash:n})),[o,a]=yield de(t,n);try{return yield Promise.race([e(),i,o])}finally{clearTimeout(r),a.clean()}}))}var me=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function he(t,e,n,r){var i;return me(this,void 0,void 0,(function*(){const o=null!==(i=t.transactionReceiptPollingInterval)&&void 0!==i?i:t.transactionPollingInterval,[a,s]=tt((()=>me(this,void 0,void 0,(function*(){try{return(null!=r?r:Ve)(t,e,n)}catch(t){return void console.warn("An error happen while trying to get the transaction receipt",t)}}))),o),[u,c]=Z(t.transactionPollingTimeout,new b({numberOfSeconds:t.transactionPollingTimeout/1e3,transactionHash:e})),[d,l]=yield de(t,e);try{return yield Promise.race([a,c,d])}finally{u&&clearTimeout(u),s&&clearInterval(s),l.clean()}}))}var ve=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};const ge=({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})=>{var o;let a=1;const s=setInterval((()=>{ve(void 0,void 0,void 0,(function*(){if(a>=t.transactionConfirmationBlocks)return void clearInterval(s);const o=yield st.getBlockByNumber(t.requestManager,et(BigInt(e.blockNumber)+BigInt(a)),!1);(null==o?void 0:o.hash)&&(a+=1,n.emit("confirmation",{confirmations:K({format:"uint"},a,i),receipt:K(null!=r?r:Kt,e,i),latestBlockHash:K({format:"bytes32"},o.hash,i)}))}))}),null!==(o=t.transactionReceiptPollingInterval)&&void 0!==o?o:t.transactionPollingInterval)};var ye=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function pe(t,e,n,r,i,o){if(lt(n)||lt(n.blockHash))throw new w({receipt:n,blockHash:K({format:"bytes32"},null==n?void 0:n.blockHash,i),transactionHash:K({format:"bytes32"},r,i)});if(!n.blockNumber)throw new x({receipt:n});e.emit("confirmation",{confirmations:K({format:"uint"},1,i),receipt:K(null!=o?o:Kt,n,i),latestBlockHash:K({format:"bytes32"},n.blockHash,i)});const a=t.requestManager.provider;a&&"supportsSubscriptions"in a&&a.supportsSubscriptions()?(({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})=>{let o,a=!0;setImmediate((()=>{var s;null===(s=t.subscriptionManager)||void 0===s||s.subscribe("newHeads").then((s=>{s.on("data",(u=>ye(void 0,void 0,void 0,(function*(){var c;if(a=!1,!(null==u?void 0:u.number)||o===(null==u?void 0:u.parentHash))return;o=null==u?void 0:u.parentHash;const d=BigInt(u.number)-BigInt(e.blockNumber)+BigInt(1);n.emit("confirmation",{confirmations:K({format:"uint"},d,i),receipt:K(null!=r?r:Kt,e,i),latestBlockHash:K({format:"bytes32"},u.parentHash,i)}),d>=t.transactionConfirmationBlocks&&(yield null===(c=t.subscriptionManager)||void 0===c?void 0:c.removeSubscription(s))})))),s.on("error",(()=>ye(void 0,void 0,void 0,(function*(){var o;yield null===(o=t.subscriptionManager)||void 0===o?void 0:o.removeSubscription(s),a=!1,ge({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,customTransactionReceiptSchema:r,returnFormat:i})}))))})).catch((()=>{a=!1,ge({web3Context:t,transactionReceipt:e,customTransactionReceiptSchema:r,transactionPromiEvent:n,returnFormat:i})}))})),setTimeout((()=>{a&&ge({web3Context:t,transactionReceipt:e,transactionPromiEvent:n,returnFormat:i})}),1e3*t.blockHeaderTimeout)})({web3Context:t,transactionReceipt:n,transactionPromiEvent:e,customTransactionReceiptSchema:o,returnFormat:i}):ge({web3Context:t,transactionReceipt:n,transactionPromiEvent:e,customTransactionReceiptSchema:o,returnFormat:i})}var be=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};const we=(t,e)=>{var n,r,i,o,a;if(t instanceof P&&t.cause instanceof F){if(void 0!==e){const i=e.filter((t=>Ft(t)));return kt(i,t.cause),{reason:t.cause.message,signature:null===(n=t.cause.data)||void 0===n?void 0:n.slice(0,10),data:null===(r=t.cause.data)||void 0===r?void 0:r.substring(10),customErrorName:t.cause.errorName,customErrorDecodedSignature:t.cause.errorSignature,customErrorArguments:t.cause.errorArgs}}return{reason:t.cause.message,signature:null===(i=t.cause.data)||void 0===i?void 0:i.slice(0,10),data:null===(o=t.cause.data)||void 0===o?void 0:o.substring(10)}}if(t instanceof k&&!Array.isArray(null===(a=t.cause)||void 0===a?void 0:a.errors)&&void 0!==t.cause)return t.cause.message;throw t};function xe(t,e,n,r=t.defaultReturnFormat){return be(this,void 0,void 0,(function*(){try{return void(yield Ze(t,e,t.defaultBlock,r))}catch(t){return we(t,n)}}))}var Pe=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};function Fe(t,e,n,r,i,o){return Pe(this,void 0,void 0,(function*(){let a,s=o;if(void 0===s&&(void 0!==r?s=we(r):t.handleRevert&&void 0!==e&&(s=yield xe(t,e,i))),void 0===s)a=new R(n);else if("string"==typeof s)a=new B(s,void 0,n);else if(void 0!==s.customErrorName&&void 0!==s.customErrorDecodedSignature&&void 0!==s.customErrorArguments){const t=s;a=new C(t.reason,t.customErrorName,t.customErrorDecodedSignature,t.customErrorArguments,t.signature,n,t.data)}else a=new B(s.reason,s.signature,n,s.data);return a}))}const ke=(t,e,r,i=n)=>{var o,a,s,u,c;let d=Object.assign({},t);const l=K(_t,e,i);if([Yt,"allEvents"].includes(d.name)){const t=r.find((t=>t.signature===e.topics[0]));d=t||{anonymous:!0}}if(d.inputs=null!==(a=null!==(o=d.inputs)&&void 0!==o?o:t.inputs)&&void 0!==a?a:[],!d.anonymous){let t=0;(null!==(s=d.inputs)&&void 0!==s?s:[]).forEach((e=>{e.indexed&&(t+=1)})),t>0&&(null==e?void 0:e.topics)&&(null==e?void 0:e.topics.length)!==t+1&&(d=Object.assign(Object.assign({},d),{anonymous:!0,inputs:[]}))}const f=d.anonymous?e.topics:(null!==(u=e.topics)&&void 0!==u?u:[]).slice(1);return Object.assign(Object.assign({},l),{returnValues:Rt([...null!==(c=d.inputs)&&void 0!==c?c:[]],e.data,f),event:d.name,signature:!d.anonymous&&e.topics&&0!==e.topics.length&&e.topics[0]?e.topics[0]:void 0,raw:{data:e.data,topics:e.topics}})};var Re=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};class Be{constructor({options:t,web3Context:e,promiEvent:n,returnFormat:r}){this.options={checkRevertBeforeSending:!0},this.options=t,this.web3Context=e,this.promiEvent=n,this.returnFormat=r}getReceiptWithEvents(t){var e,n;const r=Object.assign({},null!=t?t:{});if((null===(e=this.options)||void 0===e?void 0:e.contractAbi)&&r.logs&&r.logs.length>0){r.events={};for(const t of r.logs){const e=ke(Zt,t,null===(n=this.options)||void 0===n?void 0:n.contractAbi,this.returnFormat);e.event&&(r.events[e.event]=e)}}return r}checkRevertBeforeSending(t){return Re(this,void 0,void 0,(function*(){if(!1!==this.options.checkRevertBeforeSending){let e=t;lt(t.data)&&lt(t.input)&&lt(t.gas)&&(e=Object.assign(Object.assign({},t),{gas:21e3}));const n=yield xe(this.web3Context,e,this.options.contractAbi);if(void 0!==n)throw yield Fe(this.web3Context,t,void 0,void 0,this.options.contractAbi,n)}}))}emitSending(t){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",t)}populateGasPrice({transactionFormatted:e,transaction:n}){var r;return Re(this,void 0,void 0,(function*(){let i=e;return this.web3Context.config.ignoreGasPricing||(null===(r=this.options)||void 0===r?void 0:r.ignoreGasPricing)||!lt(e.gasPrice)||!lt(n.maxPriorityFeePerGas)&&!lt(n.maxFeePerGas)||(i=Object.assign(Object.assign({},e),yield ne(e,this.web3Context,t))),i}))}signAndSend({wallet:t,tx:e}){return Re(this,void 0,void 0,(function*(){if(t){const n=yield t.signTransaction(e);return fe(this.web3Context,(()=>Re(this,void 0,void 0,(function*(){return st.sendRawTransaction(this.web3Context.requestManager,n.rawTransaction)}))),n.transactionHash)}return fe(this.web3Context,(()=>Re(this,void 0,void 0,(function*(){return st.sendTransaction(this.web3Context.requestManager,e)}))))}))}emitSent(t){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",t)}emitTransactionHash(t){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",t)}emitReceipt(t){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",t)}handleError({error:t,tx:e}){var n;return Re(this,void 0,void 0,(function*(){let r=t;return r instanceof P&&this.web3Context.handleRevert&&(r=yield Fe(this.web3Context,e,void 0,void 0,null===(n=this.options)||void 0===n?void 0:n.contractAbi)),(r instanceof k||r instanceof P||r instanceof C||r instanceof R||r instanceof B||r instanceof b)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",r),r}))}emitConfirmation({receipt:t,transactionHash:e,customTransactionReceiptSchema:n}){this.promiEvent.listenerCount("confirmation")>0&&pe(this.web3Context,this.promiEvent,t,e,this.returnFormat,n)}handleResolve({receipt:t,tx:e}){var n,r,i;return Re(this,void 0,void 0,(function*(){if(null===(n=this.options)||void 0===n?void 0:n.transactionResolver)return null===(r=this.options)||void 0===r?void 0:r.transactionResolver(t);if(t.status===BigInt(0)){const n=yield Fe(this.web3Context,e,t,void 0,null===(i=this.options)||void 0===i?void 0:i.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",n),n}return t}))}}var Ce=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Se=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n};const Ge=t=>Ce(void 0,void 0,void 0,(function*(){return st.getProtocolVersion(t.requestManager)})),Ie=t=>Ce(void 0,void 0,void 0,(function*(){return st.getSyncing(t.requestManager)})),je=t=>Ce(void 0,void 0,void 0,(function*(){return st.getCoinbase(t.requestManager)})),Oe=t=>Ce(void 0,void 0,void 0,(function*(){return st.getMining(t.requestManager)}));function Te(t,e){return Ce(this,void 0,void 0,(function*(){const n=yield st.getHashRate(t.requestManager);return K({format:"uint"},n,null!=e?e:t.defaultReturnFormat)}))}function Me(t,e){return Ce(this,void 0,void 0,(function*(){const n=yield st.getGasPrice(t.requestManager);return K({format:"uint"},n,null!=e?e:t.defaultReturnFormat)}))}function He(t,e){return Ce(this,void 0,void 0,(function*(){const n=yield st.getMaxPriorityFeePerGas(t.requestManager);return K({format:"uint"},n,null!=e?e:t.defaultReturnFormat)}))}function qe(t,e){return Ce(this,void 0,void 0,(function*(){const n=yield st.getBlockNumber(t.requestManager);return K({format:"uint"},n,null!=e?e:t.defaultReturnFormat)}))}function Ee(e,n,r=e.defaultBlock,i){return Ce(this,void 0,void 0,(function*(){const o=yt(r)?r:K({format:"uint"},r,t),a=yield st.getBalance(e.requestManager,n,o);return K({format:"uint"},a,null!=i?i:e.defaultReturnFormat)}))}function Ae(e,n,r,i=e.defaultBlock,o){return Ce(this,void 0,void 0,(function*(){const a=K({format:"uint"},r,t),s=yt(i)?i:K({format:"uint"},i,t),u=yield st.getStorageAt(e.requestManager,n,a,s);return K({format:"bytes"},u,null!=o?o:e.defaultReturnFormat)}))}function Le(e,n,r=e.defaultBlock,i){return Ce(this,void 0,void 0,(function*(){const o=yt(r)?r:K({format:"uint"},r,t),a=yield st.getCode(e.requestManager,n,o);return K({format:"bytes"},a,null!=i?i:e.defaultReturnFormat)}))}function Ne(e,n=e.defaultBlock,r=!1,i){var o;return Ce(this,void 0,void 0,(function*(){let a;if(pt(n)){const i=K({format:"bytes32"},n,t);a=yield st.getBlockByHash(e.requestManager,i,r)}else{const i=yt(n)?n:K({format:"uint"},n,t);a=yield st.getBlockByNumber(e.requestManager,i,r)}const s=K(Ut,a,null!=i?i:e.defaultReturnFormat);if(!lt(s)){return Object.assign(Object.assign({},s),{transactions:null!==(o=s.transactions)&&void 0!==o?o:[]})}return s}))}function De(e,n=e.defaultBlock,r){return Ce(this,void 0,void 0,(function*(){let i;if(pt(n)){const r=K({format:"bytes32"},n,t);i=yield st.getBlockTransactionCountByHash(e.requestManager,r)}else{const r=yt(n)?n:K({format:"uint"},n,t);i=yield st.getBlockTransactionCountByNumber(e.requestManager,r)}return K({format:"uint"},i,null!=r?r:e.defaultReturnFormat)}))}function Ue(e,n=e.defaultBlock,r){return Ce(this,void 0,void 0,(function*(){let i;if(pt(n)){const r=K({format:"bytes32"},n,t);i=yield st.getUncleCountByBlockHash(e.requestManager,r)}else{const r=yt(n)?n:K({format:"uint"},n,t);i=yield st.getUncleCountByBlockNumber(e.requestManager,r)}return K({format:"uint"},i,null!=r?r:e.defaultReturnFormat)}))}function We(e,n=e.defaultBlock,r,i){return Ce(this,void 0,void 0,(function*(){const o=K({format:"uint"},r,t);let a;if(pt(n)){const r=K({format:"bytes32"},n,t);a=yield st.getUncleByBlockHashAndIndex(e.requestManager,r,o)}else{const r=yt(n)?n:K({format:"uint"},n,t);a=yield st.getUncleByBlockNumberAndIndex(e.requestManager,r,o)}return K(Ut,a,null!=i?i:e.defaultReturnFormat)}))}function _e(t,e,r=t.defaultReturnFormat){return Ce(this,void 0,void 0,(function*(){const i=K({format:"bytes32"},e,n),o=yield st.getTransactionByHash(t.requestManager,i);return lt(o)?o:Qt(o,r,{transactionSchema:t.config.customTransactionSchema,fillInputAndData:!0})}))}function ze(t,e){return Ce(this,void 0,void 0,(function*(){return(yield st.getPendingTransactions(t.requestManager)).map((n=>Qt(n,null!=e?e:t.defaultReturnFormat,{transactionSchema:t.config.customTransactionSchema,fillInputAndData:!0})))}))}function Ke(e,n=e.defaultBlock,r,i){return Ce(this,void 0,void 0,(function*(){const o=K({format:"uint"},r,t);let a;if(pt(n)){const r=K({format:"bytes32"},n,t);a=yield st.getTransactionByBlockHashAndIndex(e.requestManager,r,o)}else{const r=yt(n)?n:K({format:"uint"},n,t);a=yield st.getTransactionByBlockNumberAndIndex(e.requestManager,r,o)}return lt(a)?a:Qt(a,null!=i?i:e.defaultReturnFormat,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})}))}function Ve(t,e,r){return Ce(this,void 0,void 0,(function*(){const i=K({format:"bytes32"},e,n);let o;try{o=yield st.getTransactionReceipt(t.requestManager,i)}catch(t){if("object"!=typeof t||lt(t)||!("message"in t)||"transaction indexing is in progress"!==t.message)throw t;console.warn("Transaction indexing is in progress.")}return lt(o)?o:K(Kt,o,null!=r?r:t.defaultReturnFormat)}))}function Je(e,n,r=e.defaultBlock,i){return Ce(this,void 0,void 0,(function*(){const o=yt(r)?r:K({format:"uint"},r,t),a=yield st.getTransactionCount(e.requestManager,n,o);return K({format:"uint"},a,null!=i?i:e.defaultReturnFormat)}))}function $e(e,n,r,i={checkRevertBeforeSending:!0},a){const s=new o(((o,u)=>{setImmediate((()=>{(()=>{Ce(this,void 0,void 0,(function*(){const c=new Be({web3Context:e,promiEvent:s,options:i,returnFormat:r});let d=Object.assign({},n);lt(a)||(d=yield a.processTransaction(d));let l=Qt(Object.assign(Object.assign({},d),{from:ie("from",e,d),to:ie("to",e,d)}),t,{transactionSchema:e.config.customTransactionSchema});try{let t;l=yield c.populateGasPrice({transaction:d,transactionFormatted:l}),yield c.checkRevertBeforeSending(l),c.emitSending(l),e.wallet&&!lt(l.from)&&(t=e.wallet.get(l.from));const n=yield c.signAndSend({wallet:t,tx:l}),i=K({format:"bytes32"},n,null!=r?r:e.defaultReturnFormat);c.emitSent(l),c.emitTransactionHash(i);const a=yield he(e,n,null!=r?r:e.defaultReturnFormat),s=c.getReceiptWithEvents(K(Kt,a,null!=r?r:e.defaultReturnFormat));c.emitReceipt(s),o(yield c.handleResolve({receipt:s,tx:l})),c.emitConfirmation({receipt:s,transactionHash:n})}catch(t){u(yield c.handleError({error:t,tx:l}))}}))})()}))}));return s}function Xe(e,n,r,i={checkRevertBeforeSending:!0}){const a=new o(((o,s)=>{setImmediate((()=>{(()=>{Ce(this,void 0,void 0,(function*(){const u=new Be({web3Context:e,promiEvent:a,options:i,returnFormat:r}),c=K({format:"bytes"},n,t),d=ut.fromSerializedData(nt(X(c))),l=Object.assign(Object.assign({},d.toJSON()),{from:d.getSenderAddress().toString()});try{const{v:t,r:n,s:i}=l,a=Se(l,["v","r","s"]);yield u.checkRevertBeforeSending(a),u.emitSending(c);const s=yield fe(e,(()=>Ce(this,void 0,void 0,(function*(){return st.sendRawTransaction(e.requestManager,c)}))));u.emitSent(c);const d=K({format:"bytes32"},s,null!=r?r:e.defaultReturnFormat);u.emitTransactionHash(d);const f=yield he(e,s,null!=r?r:e.defaultReturnFormat),m=u.getReceiptWithEvents(K(Kt,f,null!=r?r:e.defaultReturnFormat));u.emitReceipt(m),o(yield u.handleResolve({receipt:m,tx:l})),u.emitConfirmation({receipt:m,transactionHash:s})}catch(t){s(yield u.handleError({error:t,tx:l}))}}))})()}))}));return a}function Qe(t,e,r,i=t.defaultReturnFormat){var o;return Ce(this,void 0,void 0,(function*(){const a=K({format:"bytes"},e,n);if(null===(o=t.wallet)||void 0===o?void 0:o.get(r)){const e=t.wallet.get(r).sign(a);return K(Vt,e,i)}if("number"==typeof r)throw new S(e,'RPC method "eth_sign" does not support index signatures');const s=yield st.sign(t.requestManager,r,a);return K({format:"bytes"},s,i)}))}function Ye(e,n,r=e.defaultReturnFormat){return Ce(this,void 0,void 0,(function*(){const i=yield st.signTransaction(e.requestManager,Qt(n,t,{transactionSchema:e.config.customTransactionSchema}));return bt(i)?function(t,e,n={fillInputAndData:!1}){return{raw:K({format:"bytes"},t,e),tx:Qt(Object.assign(Object.assign({},ut.fromSerializedData(X(t)).toJSON()),{hash:$(Q(X(t))),type:Ot(X(t))}),e,{fillInputAndData:n.fillInputAndData,transactionSchema:n.transactionSchema})}}(i,r,{fillInputAndData:!0}):{raw:K({format:"bytes"},i.raw,r),tx:Qt(i.tx,r,{transactionSchema:e.config.customTransactionSchema,fillInputAndData:!0})}}))}function Ze(e,n,r=e.defaultBlock,i=e.defaultReturnFormat){return Ce(this,void 0,void 0,(function*(){const o=yt(r)?r:K({format:"uint"},r,t),a=yield st.call(e.requestManager,Qt(n,t,{transactionSchema:e.config.customTransactionSchema}),o);return K({format:"bytes"},a,i)}))}function tn(e,n,r=e.defaultBlock,i){return Ce(this,void 0,void 0,(function*(){const o=Qt(n,t,{transactionSchema:e.config.customTransactionSchema}),a=yt(r)?r:K({format:"uint"},r,t),s=yield st.estimateGas(e.requestManager,o,a);return K({format:"uint"},s,null!=i?i:e.defaultReturnFormat)}))}function en(t,e,n){return Ce(this,void 0,void 0,(function*(){let{toBlock:r,fromBlock:i}=e;lt(r)||"number"!=typeof r&&"bigint"!=typeof r||(r=et(r)),lt(i)||"number"!=typeof i&&"bigint"!=typeof i||(i=et(i));const o=Object.assign(Object.assign({},e),{fromBlock:i,toBlock:r});return(yield st.getLogs(t.requestManager,o)).map((e=>"string"==typeof e?e:K(_t,e,null!=n?n:t.defaultReturnFormat)))}))}function nn(t,e){return Ce(this,void 0,void 0,(function*(){const n=yield st.getChainId(t.requestManager);return K({format:"uint"},n,null!=e?e:t.defaultReturnFormat)}))}function rn(e,n,r,i=e.defaultBlock,o){return Ce(this,void 0,void 0,(function*(){const a=r.map((e=>K({format:"bytes"},e,t))),s=yt(i)?i:K({format:"uint"},i,t),u=yield st.getProof(e.requestManager,n,a,s);return K(Xt,u,null!=o?o:e.defaultReturnFormat)}))}function on(e,n,r=e.defaultBlock,i,o){return Ce(this,void 0,void 0,(function*(){const a=K({format:"uint"},n,t),s=yt(r)?r:K({format:"uint"},r,t),u=K({type:"array",items:{format:"uint"}},i,te),c=yield st.getFeeHistory(e.requestManager,a,s,u);return K(Jt,c,null!=o?o:e.defaultReturnFormat)}))}function an(e,n,r=e.defaultBlock,i){return Ce(this,void 0,void 0,(function*(){const o=yt(r)?r:K({format:"uint"},r,t),a=yield st.createAccessList(e.requestManager,Qt(n,t,{transactionSchema:e.config.customTransactionSchema}),o);return K(Ht,a,null!=i?i:e.defaultReturnFormat)}))}function sn(t,e,n,r,i){return Ce(this,void 0,void 0,(function*(){const o=yield st.signTypedData(t.requestManager,e,n,r);return K({format:"bytes"},o,null!=i?i:t.defaultReturnFormat)}))}class un extends a{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(t){return K(_t,t,super.returnFormat)}}class cn extends a{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(t){return K({format:"string"},t,super.returnFormat)}}class dn extends a{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(t){return K(Wt,t,super.returnFormat)}}class ln extends a{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(t){if("boolean"==typeof t)this.emit("changed",t);else{const e=Object.fromEntries(Object.entries((null==t?void 0:t.status)||t).map((([t,e])=>[t.charAt(0).toLowerCase()+t.substring(1),e])));this.emit("changed",t.syncing),this.emit("data",K(zt,e,super.returnFormat))}}}var fn=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};const mn={logs:un,newPendingTransactions:cn,newHeads:dn,syncing:ln,pendingTransactions:cn,newBlockHeaders:dn};class hn extends s{constructor(t){"string"==typeof t||u(t)?super({provider:t,registeredSubscriptions:mn}):t.registeredSubscriptions?super(t):(super(Object.assign(Object.assign({},t),{registeredSubscriptions:mn})),this.getFeeData=this.calculateFeeData)}setTransactionMiddleware(t){this.transactionMiddleware=t}getTransactionMiddleware(){return this.transactionMiddleware}getProtocolVersion(){return fn(this,void 0,void 0,(function*(){return st.getProtocolVersion(this.requestManager)}))}isSyncing(){return fn(this,void 0,void 0,(function*(){return st.getSyncing(this.requestManager)}))}getCoinbase(){return fn(this,void 0,void 0,(function*(){return st.getCoinbase(this.requestManager)}))}isMining(){return fn(this,void 0,void 0,(function*(){return st.getMining(this.requestManager)}))}getHashrate(t){var e;return void 0===t&&(t=null!==(e=this.defaultReturnFormat)&&void 0!==e?e:n),fn(this,void 0,void 0,(function*(){return this.getHashRate(t)}))}getHashRate(t=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Te(this,t)}))}getGasPrice(t=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Me(this,t)}))}getMaxPriorityFeePerGas(t=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return He(this,t)}))}calculateFeeData(t=BigInt(2),e=rt.Gwei){var n;return fn(this,void 0,void 0,(function*(){const r=yield this.getBlock(void 0,!1),i=null!==(n=null==r?void 0:r.baseFeePerGas)&&void 0!==n?n:void 0;let o,a,s;try{o=yield this.getGasPrice()}catch(t){}try{a=yield this.getMaxPriorityFeePerGas()}catch(t){}return i&&(a=null!=a?a:e,s=i*t+a),{gasPrice:o,maxFeePerGas:s,maxPriorityFeePerGas:a,baseFeePerGas:i}}))}getAccounts(){var t;return fn(this,void 0,void 0,(function*(){return(null!==(t=yield st.getAccounts(this.requestManager))&&void 0!==t?t:[]).map((t=>it(t)))}))}getBlockNumber(t=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return qe(this,t)}))}getBalance(t,e=this.defaultBlock,n=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Ee(this,t,e,n)}))}getStorageAt(t,e,n=this.defaultBlock,r=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Ae(this,t,e,n,r)}))}getCode(t,e=this.defaultBlock,n=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Le(this,t,e,n)}))}getBlock(t=this.defaultBlock,e=!1,n=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Ne(this,t,e,n)}))}getBlockTransactionCount(t=this.defaultBlock,e=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return De(this,t,e)}))}getBlockUncleCount(t=this.defaultBlock,e=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Ue(this,t,e)}))}getUncle(t=this.defaultBlock,e,n=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return We(this,t,e,n)}))}getTransaction(t,e=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){const n=yield _e(this,t,e);if(!n)throw new G;return n}))}getPendingTransactions(t=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return ze(this,t)}))}getTransactionFromBlock(t=this.defaultBlock,e,n=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Ke(this,t,e,n)}))}getTransactionReceipt(t,e=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){const n=yield Ve(this,t,e);if(!n)throw new G;return n}))}getTransactionCount(t,e=this.defaultBlock,n=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Je(this,t,e,n)}))}sendTransaction(t,e=this.defaultReturnFormat,n){return $e(this,t,e,n,this.transactionMiddleware)}sendSignedTransaction(t,e=this.defaultReturnFormat,n){return Xe(this,t,e,n)}sign(t,e,n=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Qe(this,t,e,n)}))}signTransaction(t,e=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Ye(this,t,e)}))}call(t,e=this.defaultBlock,n=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return Ze(this,t,e,n)}))}estimateGas(t,e=this.defaultBlock,n=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return tn(this,t,e,n)}))}getPastLogs(t,e=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return en(this,t,e)}))}getWork(){return fn(this,void 0,void 0,(function*(){return st.getWork(this.requestManager)}))}submitWork(t,e,n){return fn(this,void 0,void 0,(function*(){return st.submitWork(this.requestManager,t,e,n)}))}requestAccounts(){return fn(this,void 0,void 0,(function*(){return st.requestAccounts(this.requestManager)}))}getChainId(t=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return nn(this,t)}))}getNodeInfo(){return fn(this,void 0,void 0,(function*(){return st.getNodeInfo(this.requestManager)}))}getProof(t,e,n=this.defaultBlock,r=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return rn(this,t,e,n,r)}))}getFeeHistory(t,e=this.defaultBlock,n,r=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return on(this,t,e,n,r)}))}createAccessList(t,e=this.defaultBlock,n=this.defaultReturnFormat){return fn(this,void 0,void 0,(function*(){return an(this,t,e,n)}))}signTypedData(t,e,r,i){var o;return void 0===r&&(r=!1),void 0===i&&(i=null!==(o=this.defaultReturnFormat)&&void 0!==o?o:n),fn(this,void 0,void 0,(function*(){return sn(this,t,e,r,i)}))}subscribe(t,e,r){var i,o;return void 0===r&&(r=null!==(i=this.defaultReturnFormat)&&void 0!==i?i:n),fn(this,void 0,void 0,(function*(){const n=yield null===(o=this.subscriptionManager)||void 0===o?void 0:o.subscribe(t,e,r);return n instanceof un&&"logs"===t&&"object"==typeof e&&!ot(e.fromBlock)&&Number.isFinite(Number(e.fromBlock))&&setImmediate((()=>{this.getPastLogs(e).then((t=>{for(const e of t)n._processSubscriptionResult(e)})).catch((t=>{n._processSubscriptionError(t)}))})),n}))}static shouldClearSubscription({sub:t}){return!(t instanceof ln)}clearSubscriptions(t=!1){var e;return null===(e=this.subscriptionManager)||void 0===e?void 0:e.unsubscribe(t?hn.shouldClearSubscription:void 0)}}function vn(t){return!(!lt(t.to)&&!ht(t.to))&&(!(!vt(t.type)&&!lt(t.type)&&2!==t.type.length)&&(!!vt(t.nonce)&&(!!vt(t.gas)&&(!!vt(t.value)&&(!!vt(t.input)&&!(t.chainId&&!vt(t.chainId)))))))}function gn(t){return!(!lt(t.address)&&!ht(t.address))&&!(!lt(t.storageKeys)&&!t.storageKeys.every((t=>wt(t))))}function yn(t){return!(!Array.isArray(t)||!t.every((t=>gn(t))))}function pn(t){return!!vn(t)&&(!!vt(t.maxFeePerGas)&&(!!vt(t.maxPriorityFeePerGas)&&!!yn(t.accessList)))}function bn(t){return!!vn(t)&&(!!vt(t.gasPrice)&&!!yn(t.accessList))}function wn(t){return!!vn(t)&&!!vt(t.gasPrice)}function xn(t){return!!ht(t.from)&&(!!vn(t)&&!!(pn(t)||bn(t)||wn(t)))}function Pn(t){if(!xn(t))throw new h(t)}function Fn(t){return!(!lt(t.from)&&!ht(t.from))&&(!!ht(t.to)&&(!(!lt(t.gas)&&!vt(t.gas))&&(!(!lt(t.gasPrice)&&!vt(t.gasPrice))&&(!(!lt(t.value)&&!vt(t.value))&&(!(!lt(t.data)&&!vt(t.data))&&(!(!lt(t.input)&&!vt(t.input))&&(!!lt(t.type)&&(!pn(t)&&!bn(t)))))))))}function kn(t){if(!Fn(t))throw new I(t)}const Rn=t=>{if(!lt(t.common)){if(lt(t.common.customChain))throw new j;if(lt(t.common.customChain.chainId))throw new O;if(!lt(t.chainId)&&t.chainId!==t.common.customChain.chainId)throw new T({txChainId:t.chainId,customChainId:t.common.customChain.chainId})}},Bn=t=>{if(!lt(t.common)&&!lt(t.chain)&&!lt(t.hardfork))throw new M;if(!lt(t.chain)&&lt(t.hardfork)||!lt(t.hardfork)&&lt(t.chain))throw new H({chain:t.chain,hardfork:t.hardfork})},Cn=t=>{if(!lt(t.common)&&!lt(t.common.baseChain)&&!lt(t.chain)&&t.chain!==t.common.baseChain)throw new q({txChain:t.chain,baseChain:t.common.baseChain})},Sn=t=>{if(!lt(t.common)&&!lt(t.common.hardfork)&&!lt(t.hardfork)&&t.hardfork!==t.common.hardfork)throw new E({txHardfork:t.hardfork,commonHardfork:t.common.hardfork})},Gn=t=>{if(lt(t.gas)||!xt(t.gas)||lt(t.gasPrice)||!xt(t.gasPrice))throw new A({gas:t.gas,gasPrice:t.gasPrice});if(!lt(t.maxFeePerGas)||!lt(t.maxPriorityFeePerGas))throw new L({maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas})},In=t=>{if(!lt(t.gasPrice)&&"0x2"===t.type)throw new N(t.gasPrice);if("0x0"===t.type||"0x1"===t.type)throw new L({maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas});if(lt(t.maxFeePerGas)||!xt(t.maxFeePerGas)||lt(t.maxPriorityFeePerGas)||!xt(t.maxPriorityFeePerGas))throw new D({maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas})},jn=t=>{const e=!lt(t.gas)||!lt(t.gasLimit),n=e&&!lt(t.gasPrice),r=e&&!lt(t.maxPriorityFeePerGas)&&!lt(t.maxFeePerGas);if(!n&&!r)throw new U({gas:t.gas,gasPrice:t.gasPrice,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas});if(n&&r)throw new W({gas:t.gas,gasPrice:t.gasPrice,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas});(n?Gn:In)(t),(!lt(t.type)&&t.type>"0x1"?In:Gn)(t)},On=(e,n,r={transactionSchema:void 0})=>{if(!lt(n))return void n(e);if("object"!=typeof e||lt(e))throw new _(e);Rn(e),Bn(e),Cn(e),Sn(e);const i=Qt(e,t,{transactionSchema:r.transactionSchema});if(jn(i),lt(i.nonce)||lt(i.chainId)||i.nonce.startsWith("-")||i.chainId.startsWith("-"))throw new z({nonce:e.nonce,chainId:e.chainId})};var Tn=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))};const Mn=(e,n,r,i=!1,o=!0)=>Tn(void 0,void 0,void 0,(function*(){const a=Qt(yield se({transaction:e,web3Context:n,privateKey:r,fillGasPrice:i,fillGasLimit:o}),t,{transactionSchema:n.config.customTransactionSchema});return On(a,void 0,{transactionSchema:n.config.customTransactionSchema}),ut.fromTxData((t=>{var e,n;return Object.assign(Object.assign({},t),{nonce:t.nonce,gasPrice:t.gasPrice,gasLimit:null!==(e=t.gasLimit)&&void 0!==e?e:t.gas,to:t.to,value:t.value,data:null!==(n=t.data)&&void 0!==n?n:t.input,type:t.type,chainId:t.chainId,accessList:t.accessList,maxPriorityFeePerGas:t.maxPriorityFeePerGas,maxFeePerGas:t.maxFeePerGas})})(a),((t,e)=>{var n,r,i,o,a,s,u,c,d,l,f,m,h,v,g,y,p,b;let w;if((lt(t.chain)||lt(t.hardfork))&&lt(t.common))e.defaultCommon?(w=Object.assign({},e.defaultCommon),lt(w.hardfork)&&(w.hardfork=null!==(n=t.hardfork)&&void 0!==n?n:e.defaultHardfork),lt(w.baseChain)&&(w.baseChain=e.defaultChain)):w=dt.custom({name:"custom-network",chainId:at(t.chainId),networkId:lt(t.networkId)?void 0:at(t.networkId),defaultHardfork:null!==(r=t.hardfork)&&void 0!==r?r:e.defaultHardfork},{baseChain:e.defaultChain});else{const n=null!==(s=null!==(a=null===(o=null===(i=null==t?void 0:t.common)||void 0===i?void 0:i.customChain)||void 0===o?void 0:o.name)&&void 0!==a?a:t.chain)&&void 0!==s?s:"custom-network",r=at(null!==(d=null===(c=null===(u=null==t?void 0:t.common)||void 0===u?void 0:u.customChain)||void 0===c?void 0:c.chainId)&&void 0!==d?d:null==t?void 0:t.chainId),x=at(null!==(m=null===(f=null===(l=null==t?void 0:t.common)||void 0===l?void 0:l.customChain)||void 0===f?void 0:f.networkId)&&void 0!==m?m:null==t?void 0:t.networkId),P=null!==(g=null!==(v=null===(h=null==t?void 0:t.common)||void 0===h?void 0:h.hardfork)&&void 0!==v?v:null==t?void 0:t.hardfork)&&void 0!==g?g:e.defaultHardfork,F=null!==(b=null!==(p=null===(y=t.common)||void 0===y?void 0:y.baseChain)&&void 0!==p?p:t.chain)&&void 0!==b?b:e.defaultChain;r&&x&&n&&(w=dt.custom({name:n,chainId:r,networkId:x,defaultHardfork:P},{baseChain:F}))}return{common:w}})(a,n))}));export{Yt as ALL_EVENTS,Zt as ALL_EVENTS_ABI,un as LogsSubscription,te as NUMBER_DATA_FORMAT,dn as NewHeadsSubscription,cn as NewPendingTransactionsSubscription,Be as SendTxHelper,Vt as SignatureObjectSchema,ln as SyncingSubscription,hn as Web3Eth,Tt as accessListItemSchema,Ht as accessListResultSchema,Mt as accessListSchema,Xt as accountSchema,Wt as blockHeaderSchema,Ut as blockSchema,Ze as call,qt as chainSchema,an as createAccessList,At as customChainSchema,ke as decodeEventABI,hn as default,jt as detectTransactionType,tn as estimateGas,Jt as feeHistorySchema,Qt as formatTransaction,Ee as getBalance,Ne as getBlock,qe as getBlockNumber,De as getBlockTransactionCount,Ue as getBlockUncleCount,nn as getChainId,Le as getCode,je as getCoinbase,on as getFeeHistory,Me as getGasPrice,Te as getHashRate,en as getLogs,He as getMaxPriorityFeePerGas,ze as getPendingTransactions,rn as getProof,Ge as getProtocolVersion,Ae as getStorageAt,_e as getTransaction,Je as getTransactionCount,Ke as getTransactionFromBlock,ie as getTransactionFromOrToAttr,Ve as getTransactionReceipt,We as getUncle,Et as hardforkSchema,yn as isAccessList,gn as isAccessListEntry,vn as isBaseTransaction,Oe as isMining,Ie as isSyncing,pn as isTransaction1559Unsigned,bn as isTransaction2930Unsigned,Fn as isTransactionCall,wn as isTransactionLegacyUnsigned,xn as isTransactionWithSender,_t as logSchema,Mn as prepareTransactionForSigning,mn as registeredSubscriptions,Xe as sendSignedTransaction,$e as sendTransaction,Qe as sign,Ye as signTransaction,sn as signTypedData,$t as storageProofSchema,zt as syncSchema,se as transactionBuilder,Nt as transactionInfoSchema,Kt as transactionReceiptSchema,Lt as transactionSchema,fe as trySendTransaction,Cn as validateBaseChain,Bn as validateChainInfo,Rn as validateCustomChainInfo,In as validateFeeMarketGas,jn as validateGas,Sn as validateHardfork,Gn as validateLegacyGas,kn as validateTransactionCall,On as validateTransactionForSigning,Pn as validateTransactionWithSender,he as waitForTransactionReceipt,Dt as withdrawalsSchema};
//# sourceMappingURL=/sm/c8ca294aaba47004f662667ec3827a85ae5963aaf6a59d54c9c01f771ab4e201.map