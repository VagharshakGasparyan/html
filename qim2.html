<!DOCTYPE html>
<!--html lang="en"-->
<html>
<head>
    <meta charset="UTF-8">
    <title>Mendeleev</title>
    <style>
        /*.b {
            width: 100%;
            height: 47px;
            margin: 0;
            color: blue;
            font-size: 12px;
            font-weight: bold;
            border-radius: 7px;
        }*/

        .w {
            margin: 0 auto;
            width: 90%;
            min-width: 870px;
            max-width: 1280px;
        }

        .t {
            height: auto;
            min-height: 82px;
            border: 2px solid green;
            /*border-top-left-radius: 20% 30%;*/
            /*border-top-right-radius: 20% 30%;*/
            /*border-top-color: red;*/
            /*transform: skewX(-20deg);*/
            /*transform: rotate(3deg);*/
            transform-origin: 10% 10%;
            border-radius: 17px 17px 0 0;
            overflow: auto;
            text-align: center;
            font-size: 25px;
            font-weight: bold;
            color: blue;
            display: block;
            margin: 5px auto;
            /*position: absolute;*/
            /*left: 50px;*/
            /*margin-top: 50px;*/
        }

        /*td:hover {
            background-color: yellow;
        }*/
        .deghin:hover {
            background-color: yellow;
        }

        .k:hover {
            background-color: #adf;
        }

        .karm:hover {
            background-color: #f79;
        }

        .kan:hover {
            background-color: #7f9;
        }
    </style>
</head>
<body>
<table border="1" style="cursor: default;user-select: none;border:1px solid green" class="w" cellspacing="0"
       cellpadding="0">
    <tr align="center" style="font-size: 25px;font-weight: bold;color: darkgreen">
        <td class="k" onmousedown="build('t', '1')">1</td>
        <td class="k" onmousedown="build('t', '2')">2</td>
        <td class="k" onmousedown="build('t', '3')">3</td>
        <td class="k" onmousedown="build('t', '4')">4</td>
        <td class="k" onmousedown="build('t', '5')">5</td>
        <td class="k" onmousedown="build('t', '6')">6</td>
        <td class="k" onmousedown="build('t', '7')">7</td>
        <td class="k" onmousedown="build('t', '8')">8</td>
        <td class="k" onmousedown="build('t', '9')">9</td>
        <td class="k" onmousedown="build('t', '0')">0</td>
        <td class="k" onmousedown="build('.', '0')">.</td>
        <td class="k" onmousedown="build('*', '1')">*</td>
        <td class="k" onmousedown="build('+', '2')">+</td>
        <td class="k" onmousedown="build('=', '3')">=</td>
        <td class="k" onmousedown="build('(', '4')">(</td>
        <td class="k" onmousedown="build(')', '5')">)</td>
        <td class="k" onmousedown="build('<', '6')"><</td>
        <td class="karm" style="color: red" onmousedown="build('d', '0')">Delete</td>
        <td class="kan" onmousedown="equally()">Equate</td>
    </tr>
</table>
<!--input type="text" id="tx" class="w" style="display: block;margin: 0 auto;text-align: center;" oninput="tch()" value=""-->
<!--div contenteditable id="d1" class="w" style="text-align: center" oninput="tch()"></div-->
<!--div contenteditable oninput="tch()" id="d" class="t w"></div-->
<div id="d" class="t w"></div>
<script>
    var el = [["H", 1.00797, "Водород", "Hydrogen"], ["He", 4.003, "Гелий", "Helium"], ["Li", 6.939, "Литий", "Lithium"], ["Be", 9.012, "Бериллий", "Beryllium"],
        ["B", 10.811, "Бор", "Boron"], ["C", 12.01115, "Углерод", "Carbon"], ["N", 14.007, "Азот", "Nitrogen"], ["O", 15.9991, "Кислород", "Oxygen"],
        ["F", 18.998, "Фтор", "Fluorine"], ["Ne", 20.183, "Неон", "Neon"], ["Na", 22.99, "Натрий", "Sodium"], ["Mg", 24.312, "Магний", "Magnesium"],
        ["Al", 26.982, "Алюминий", "Aluminium"], ["Si", 28.086, "Кремний", "Silicon"], ["P", 30.974, "Фосфор", "Phosphorus"], ["S", 32.064, "Сера", "Sulfur"],
        ["Cl", 35.453, "Хлор", "Chlorine"], ["Ar", 39.948, "Аргон", "Argon"], ["K", 39.102, "Калий", "Potassium"], ["Ca", 40.08, "Кальций", "Calcium"],
        ["Sc", 44.956, "Скандий", "Scandium"], ["Ti", 47.9, "Титан", "Titanium"], ["V", 50.942, "Ванадий", "Vanadium"], ["Cr", 51.996, "Хром", "Chromium"],
        ["Mn", 54.938, "Марганец", "Manganese"], ["Fe", 55.847, "Железо", "Iron"], ["Co", 58.933, "Кобальт", "Cobalt"], ["Ni", 58.71, "Никель", "Nickel"],
        ["Cu", 63.546, "Медь", "Copper"], ["Zn", 65.37, "Цинк", "Zinc"], ["Ga", 69.72, "Галлий", "Gallium"], ["Ge", 72.59, "Германий", "Germanium"],
        ["As", 74.922, "Мышьяк", "Arsenic"], ["Se", 78.96, "Селен", "Selenium"], ["Br", 79.904, "Бром", "Bromine"], ["Kr", 83.8, "Криптон", "Krypton"],
        ["Rb", 85.47, "Рубидий", "Rubidium"], ["Sr", 87.62, "Стронций", "Strontium"], ["Y", 88.905, "Иттрий", "Yttrium"], ["Zr", 91.22, "Цирконий", "Zirconium"],
        ["Nb", 92.906, "Ниобий", "Niobium"], ["Mo", 95.94, "Молибден", "Molybdenum"], ["Te", 99, "Технеций", "Technetium"], ["Ru", 101.07, "Рутений", "Ruthenium"],
        ["Rh", 102.905, "Родий", "Rhodium"], ["Pd", 106.4, "Палладий", "Palladium"], ["Ag", 107.868, "Серебро", "Silver"], ["Cd", 112.4, "Кадмий", "Cadmium"],
        ["In", 114.82, "Индий", "Indium"], ["Sn", 118.69, "Олово", "Tin"], ["Sb", 121.75, "Сурьма", "Antimony"], ["Te", 127.6, "Теллур", "Tellurium"],
        ["I", 126.904, "Йод", "Iodine"], ["Xe", 131.3, "Ксенон", "Xenon"], ["Cs", 132.905, "Цезий", "Caesium"], ["Ba", 137.34, "Барий", "Barium"],
        ["La", 138.91, "Лантан", "Lanthanum"], ["Ce", 140.12, "Церий", "Cerium"], ["Pr", 140.907, "Празеодим", "Praseodymium"], ["Nd", 144.24, "Неодим", "Neodymium"],
        ["Pm", 145, "Прометий", "Promethium"], ["Sm", 150.35, "Самарий", "Samarium"], ["Eu", 151.96, "Европий", "Europium"], ["Gd", 157.25, "Гадолиний", "Gadolinium"],
        ["Tb", 158.924, "Тербий", "Terbium"], ["Dy", 162.5, "Диспрозий", "Dysprosium"], ["Ho", 164.93, "Гольмий", "Holmium"], ["Er", 167.26, "Эрбий", "Erbium"],
        ["Tm", 168.934, "Тулий", "Thulium"], ["Yb", 173.04, "Иттербий", "Ytterbium"], ["Lu", 174.97, "Лютеций", "Lutetium"], ["Hf", 178.49, "Гафний", "Hafnium"],
        ["Ta", 180.948, "Тантал", "Tantalum"], ["W", 183.85, "Вольфрам", "Tungsten"], ["Re", 186.2, "Рений", "Rhenium"], ["Os", 190.2, "Осмий", "Osmium"],
        ["Ir", 192.2, "Иридий", "Iridium"], ["Pt", 195.09, "Платина", "Platinum"], ["Au", 196.967, "Золото", "Gold"], ["Hg", 200.59, "Ртуть", "Mercury"],
        ["Tl", 204.37, "Таллий", "Thallium"], ["Pb", 207.19, "Свинец", "Lead"], ["Bi", 208.98, "Висмут", "Bismuth"], ["Po", 210, "Полоний", "Polonium"],
        ["At", 210, "Астат", "Astatine"], ["Rn", 222, "Радон", "Radon"], ["Fr", 223, "Франций", "Francium"], ["Ra", 226, "Радий", "Radium"],
        ["Ac", 227, "Актиний", "Actinium"], ["Th", 232.038, "Торий", "Thorium"], ["Pa", 231, "Протактиний", "Protactinium"], ["U", 238.03, "Уран", "Uranium"],
        ["Np", 237, "Нептуний", "Neptunium"], ["Pu", 242, "Плутоний", "Plutonium"], ["Am", 243, "Америций", "Americium"], ["Cm", 247, "Кюрий", "Curium"],
        ["Bk", 247, "Берклий", "Berkelium"], ["Cf", 249, "Калифорний", "Californium"], ["Es", 254, "Эйнштейний", "Einsteinium"], ["Fm", 253, "Фермий", "Fermium"],
        ["Md", 256, "менделеевий", "Mendelevium"], ["No", 255, "нобелий", "Nobelium"], ["Lr", 257, "лоуренсий", "Lawrencium"], ["Rf", 261, "резерфордий", "Rutherfordium"],
        ["Db", 262, "Дубний", "Dubnium"], ["Sg", 263, "Сиборгий", "Seaborgium"], ["Bh", 262, "Борий", "Bohrium"], ["Hs", 265, "Хассий", "Hassium"],
        ["Mt", 266, "Мейтнерий", "Meitnerium"], ["Ds", 281, "Дармштад", "Darmstadtium"]];
    //=============================================
    var i, j, k;
    document.write('<table border="1" style="cursor: default;user-select: none;border:1px solid green" class="w" cellspacing="0" cellpadding="0">');
    document.write('<tr align="center"><td style="font-size: 10px">ПЕРИОДЫ</td><td style="font-size: 10px">РЯДЫ</td>' +
            '<td>I</td><td>II</td><td>III</td><td>IV</td>' +
            '<td>V</td><td>VI</td><td>VII</td><td colspan="4">VIII</td></tr>');
    document.write('<tr><td align="center">I</td><td align="center">1</td><td>');
    kv(0);
    document.write('</td><td></td><td></td><td></td><td></td><td></td><td></td><td colspan="3"></td><td>');
    kv(1);
    document.write('</td></tr>');
    k = 2;
    for (j = 2; j < 4; j++) {
        document.write('<tr><td align="center">');
        document.write('II');
        if (j == 3)document.write('I');
        document.write('</td><td align="center">' + j + '</td>');
        for (i = 0; i < 7; i++) {
            document.write('<td>');
            kv(k);
            k++;
            document.write('</td>');
        }
        document.write('<td colspan="3"></td><td>');
        kv(k);
        k++;
        document.write('</td></tr>');
    }
    for (j = 4; j < 10; j += 2) {
        document.write('<tr><td align="center" rowspan="2">');
        if (j == 4)document.write('I');
        document.write('V');
        if (j == 8)document.write('I');
        document.write('</td><td align="center">' + j + '</td>');
        for (i = 0; i < 10; i++) {
            document.write('<td>');
            k = (k == 57) ? 71 : k;
            kv(k);
            k++;
            document.write('</td>');
        }
        document.write('<td></td></tr><tr>');
        document.write('<td align="center">' + (j + 1) + '</td>');
        for (i = 0; i < 7; i++) {
            document.write('<td>');
            kv(k);
            k++;
            document.write('</td>');
        }
        document.write('<td colspan="3"></td><td>');
        kv(k);
        k++;
        document.write('</td></tr>');
    }
    document.write('<tr><td align="center">VII</td><td align="center">10</td><td>');
    kv(k);
    k++;
    document.write('</td><td>');
    kv(k);
    k++;
    document.write('</td><td>');
    kv(k);
    document.write('</td>');
    k = 103;
    for (i = 0; i < 7; i++) {
        document.write('<td>');
        kv(k);
        k++;
        document.write('</td>');
    }
    document.write('<td></td></tr>');
    document.write('</table>');
    document.write('<table border="1" style="cursor: default;user-select: none;border:1px solid green" class="w" cellspacing="0" cellpadding="0">');
    document.write('<tr><td align="center" colspan="2" style="font-size: 10px">ЛАНТАНИДЫ</td>');
    k = 57;
    for (i = 0; i < 14; i++) {
        document.write('<td>');
        kv(k);
        k++;
        document.write('</td>');
    }
    document.write('</tr>');
    document.write('<tr><td align="center" colspan="2" style="font-size: 10px">АКТИНИДЫ</td>');
    k = 89;
    for (i = 0; i < 14; i++) {
        document.write('<td>');
        kv(k);
        k++;
        document.write('</td>');
    }
    document.write('</tr>');
    document.write('</table>');
    //===========================================
    function kv(nk) {
        document.write('<table class="deghin" onmousedown="build(\'e\',' + nk.toString() + ')"  id="m' + nk.toString() + '" border="0" cellspacing="0" cellpadding="0" style="width: 100%">');
        document.write('<tr><td style="font-size: 13px; width: 30%;color: red">' + (nk + 1).toString() + '</td>' +
                '<td align="center" style="font-size: 19px; font-weight: bold;color: blue">' + el[nk][0] + '</td></tr>');
        document.write('<tr style="font-size: 13px;color: black"><td colspan="2" align="center">' + el[nk][3].toString() + '</td></tr>');
        document.write('<tr style="font-size: 13px;color: saddlebrown"><td colspan="2" align="center">' + el[nk][2].toString() + '</td></tr>');
        document.write('<tr style="font-size: 13px"><td colspan="2">' + el[nk][1].toString() + '</td></tr>');
        document.write('</table>');
    }
    /*
     "s"-սկիզբ -> 0
     "e"-քիմիական տարր -> քիմիական տարրի ինդեքսը
     "."-կետ -> 0
     "t"-թիվ -> թվի արժեքը, 0...9 և
     "pt"-թիվ -> փոքր չափի թվի արժեքը, 0...9
     "mt"-թիվ -> մեծ չափի թվի արժեքը, 0...9
     "("-փակագծի բացը -> թիվ, որերորդ փակագծի բացն է
     ")"-փակագծի փակը -> թիվ, որերորդ փակագծի փակն է բաց փակագծին համապատասխան
     "*"-նշան -> 1
     "+"-գումարման նշան -> 2
     "="-հավասարման նշան -> 3
     "a"-ավարտ -> 4
     var s=["s"]; սիմվոլներ
     var sa=["0"]; սիմվոլների արժեքներ ->
     var sp=[0]; վորերորդ փակագծին է պատկանում
     */
    var s = [["s", 0, 1]];//s[0][0]="s", s[0][1]=0, s[0][2]=0
    var z = [];
    var textQanak = 0;
    function build(sim, val) {
        var n = s.length - 1, i, j, k, t = "", bul = true;
        switch (sim) {
            case "e":
                if (s[n][0] === "pt" || s[n][0] === "mt") {
                    if (s[n][1][s[n][1].length - 1] !== ".") {
                        s.push([sim, val, 1]);
                    }
                } else {
                    s.push([sim, val, 1]);
                }
                break;
            case ".":
                if (s[n][0] === "pt" || s[n][0] === "mt") {
                    bul = true;
                    for (j = 0; j < s[n][1].length; j++) {
                        if (s[n][1][j] === ".") {
                            bul = false;
                            break;
                        }
                    }
                    if (bul)s[n][1] += ".";
                }
                break;
            case "t":
                if (s[n][0] === "e" || s[n][0] === ")") {
                    s.push(["pt", val, 1]);
                } else if (s[n][0] === "pt" || s[n][0] === "mt") {
                    if (s[n][1] !== "0") {
                        s[n][1] += val;
                    }
                } else {
                    s.push(["mt", val, 1]);
                }
                break;
            case "(":
                if (s[n][0] === "pt" || s[n][0] === "mt") {
                    if (s[n][1][s[n][1].length - 1] !== ".") {
                        s.push([sim, val, 1]);
                    }
                } else {
                    s.push([sim, val, 1]);
                }
                break;
            case ")":
                bul = true;
                i = j = 0;
                for (k = 1; k <= n; k++) {
                    if (s[k][0] === "(")i++;
                    if (s[k][0] === ")")j++;
                }
                if (i == j) {
                    bul = false;
                } else if ((s[n][0] === "pt") && (s[n][1][s[n][1].length - 1] === ".")) {
                    bul = false;
                } else if ((s[n][0] === "(") || (s[n][0] === "+") || (s[n][0] === "=") || (s[n][0] === "*")) {
                    bul = false;
                } else if (s[n][0] === "mt") {
                    bul = false;
                }
                if (bul)s.push([sim, val, 1]);
                break;
            case "*":
                if (s[n][0] === "pt") {
                    if (s[n][1][s[n][1].length - 1] !== ".") {
                        s.push([sim, val, 1]);
                    }
                } else if ((s[n][0] === "e") || (s[n][0] === ")")) {
                    s.push([sim, val, 1]);
                }
                break;
            case "+":
                i = j = 0;
                for (k = 1; k <= n; k++) {
                    if (s[k][0] === "(")i++;
                    if (s[k][0] === ")")j++;
                }
                if (i == j) {
                    if (s[n][0] === "pt") {
                        if (s[n][1][s[n][1].length - 1] !== ".") {
                            s.push([sim, val, 1]);
                        }
                    } else if ((s[n][0] === "e") || (s[n][0] === ")")) {
                        s.push([sim, val, 1]);
                    }
                }
                break;
            case "=":
                bul = true;
                i = j = 0;
                for (k = 1; k <= n; k++) {
                    if (s[k][0] === "(")i++;
                    if (s[k][0] === ")")j++;
                    if (s[k][0] === "=") {
                        bul = false;
                        break;
                    }
                }
                if (i != j)bul = false;
                if (s[n][0] === "pt") {
                    if (s[n][1][s[n][1].length - 1] === ".") {
                        bul = false;
                    }
                } else if ((s[n][0] === "*") || (s[n][0] === "(") || (s[n][0] === "+") || (s[n][0] === "mt")) {
                    bul = false;
                }
                if (n == 0)bul = false;
                if (bul)s.push([sim, val, 1]);
                break;
            case "<":
                if (s.length > 1)s.pop();
                break;
            case "d":
                s.length = 1;
                z.length = 0;
                //t = "";
                break;
        }
        n = s.length - 1;
        //var z = [];//բանաձևերը մոլյար զանգվածներով
        z.length = 0;
        for (i = 1; i <= n; i++)s[i][2] = 1;
        j = 1;
        for (i = 1; i <= n; i++) {
            if ((s[i][0] === "+") || (s[i][0] === "=")) {
                z.push(mpt(j, i - 1));//H2O 18.015 k
                z.push([s[i][0], 0, 1]);
                j = i + 1;
            } else if (i == n) {
                z.push(mpt(j, i));
            }
        }
        t += "<table cellpadding='0' cellspacing='0' border='0' style='margin: 0 auto'>";
        t += "<tr style='font-size: 13px; color: #950'>";
        for (i = 0; i < z.length; i++) {
            t += "<td>";
            if ((z[i][0] !== "+") && (z[i][0] !== "="))t += (z[i][2] * z[i][1]).toFixed(3);
            t += "</td>";
        }
        t += "</tr><tr contenteditable='true' oninput='tch()'>";
        for (i = 0; i < z.length; i++) {
            t += "<td>" + z[i][0] + "</td>";
        }
        t += "</tr><tr style='font-size: 11px; color: #f00'>";
        j = 1;
        for (i = 0; i < z.length; i++) {
            t += "<td>";
            if ((z[i][0] !== "+") && (z[i][0] !== "=")) {
                textQanak = j;
                t += "<input type='text' id='x" + j + "' oninput='fotText(" + j + ")' style='width: 50px;text-align: center;font-size: 12px' value='x" + j + "'>";
                j++;
            }
            t += "</td>";
        }
        t += "</tr></table>";
        document.getElementById("d").innerHTML = t;

        function mpt(a, b) {
            var i, j, k, m, z = [];
            for (i = b; i >= a; i--) {//1...n
                if (s[i][0] === "pt") {
                    if (s[i - 1][0] === "e") {
                        s[i - 1][2] *= parseFloat(s[i][1]);
                    } else if (s[i - 1][0] === ")") {
                        k = m = 0;
                        for (j = i - 1; j > 0; j--) {
                            if (s[j][0] === ")")k++;
                            if (s[j][0] === "(")m++;
                            if (s[j][0] === "e")s[j][2] *= parseFloat(s[i][1]);
                            if (k == m) break;
                        }
                    }
                }
            }
            bul = false;
            for (i = a; i <= b; i++) {
                if ((s[i][0] === "mt") && (i < b) && (i > a)) {
                    k = m = 0;
                    for (j = i + 1; j <= b; j++) {
                        if (s[j][0] === ")")k++;
                        if (s[j][0] === "(")m++;
                        if (s[j][0] === "e")s[j][2] *= parseFloat(s[i][1]);
                        if ((k > m) || (bul && (s[j][0] === "*")))break;
                    }
                } else if (s[i][0] === "*")bul = true;
            }
            z[0] = "";//qim banadzev
            z[1] = 0;//molyar zangvac
            if (s[a][0] === "mt") {
                z[2] = parseFloat(s[a][1]);//demi gorcakic
            } else {
                z[2] = 1;
            }
            for (i = a; i <= b; i++) {
                switch (s[i][0]) {
                    case "e":
                        z[0] += el[s[i][1]][0];
                        z[1] += el[s[i][1]][1] * s[i][2];
                        break;
                    case "mt":
                        z[0] += s[i][1];
                        break;
                    case "pt":
                        z[0] += "<sub>" + s[i][1] + "</sub>";
                        break;
                    default:
                        z[0] += s[i][0];
                }
            }
            return z;
        }
    }
    function equally() {
        var n = s.length - 1, el_t = [], m = [], d = [], de = [], i, i1, j, j1, hx, zq, k, t, bul1, bul = false;
        for (i = 1; i <= n; i++) {//elementneri tesakneri stacum
            if ((s[i][0] === "e") && (el_t.indexOf(s[i][1]) == -1)) {
                el_t[el_t.length] = s[i][1];
            }
        }
        //alert(el_t);
        j = 0;
        m[j] = [];
        k = 1;
        hx = -1;
        for (i = 1; i <= n; i++) {//gorcakicneri matricavorum
            switch (s[i][0]) {
                case "e":
                    if (m[j][el_t.indexOf(s[i][1])] == undefined) {
                        m[j][el_t.indexOf(s[i][1])] = k * s[i][2];
                    } else {
                        m[j][el_t.indexOf(s[i][1])] += k * s[i][2];
                    }
                    break;
                case "+":
                    j++;
                    m[j] = [];
                    break;
                case "=":
                    hx = j;
                    k = -1;
                    j++;
                    m[j] = [];
                    break;
            }
        }
        //hx = hx+1 matricayi mej
        for (j = 0; j < el_t.length; j++) {//zroyakan gorcakicneri stacum
            for (i = 0; i < textQanak; i++) {
                if (m[i][j] == undefined)m[i][j] = 0;
            }
        }
        for (j = 0; j < m[0].length; j++) {// 0 = ? ev ? = 0 togheri hanum
            bul = true;
            for (i = 0; i <= hx; i++) {
                if (m[i][j] != 0) {
                    bul = false;
                    break;
                }
            }
            bul1 = true;
            for (i = hx + 1; i < textQanak; i++) {
                if (m[i][j] != 0) {
                    bul1 = false;
                    break;
                }
            }
            if (bul || bul1) {
                for (i = 0; i < textQanak; i++) {
                    m[i].splice(j, 1);
                }
                j--;
            }
        }
        for (i = 0; i < m[0].length - 1; i++) {//hamemateli togheri hanum
            for (j = i + 1; j < m[0].length; j++) {
                k = 0;
                for (i1 = 0; i1 < textQanak; i1++) {
                    if (((m[i1][i] == 0) && (m[i1][j] != 0)) || ((m[i1][i] != 0) && (m[i1][j] == 0))) {
                        break;
                    } else if ((m[i1][i] != 0) && (m[i1][j] != 0)) {
                        if (k == 0) {
                            k = m[i1][i] / m[i1][j];
                        } else if (k != m[i1][i] / m[i1][j]) {
                            break;
                        }
                    }
                    if (i1 == textQanak - 1) {
                        for (j1 = 0; j1 < textQanak; j1++) {
                            m[j1].splice(j, 1);
                        }
                        j--;
                    }
                }
            }
        }
        zq = 0;//zroyakan syuneri qanak
        for (i = 0; i < textQanak; i++) {
            bul = true;
            for (j = 0; j < m[0].length; j++) {
                if (m[i][j] != 0) {
                    bul = false;
                    break;
                }
            }
            if (bul) {
                zq++;
            }
        }
        if (m[0].length >= textQanak - zq) {//avelnord togheri hanum
            j = m[0].length - textQanak + 1 + zq;
            for (i = 0; i < textQanak; i++) {
                m[i].splice(textQanak - 1 - zq, j);
            }
        }
        if ((textQanak > m[0].length) && (m[0].length > 0)) {//pakas togheri avelacum
            var mm = [], dde = [];
            for (i = 0; i < textQanak - m[0].length; i++) {
                mm.length = 0;
                for (j = 0; j < m[0].length; j++) {
                    mm[j] = [];
                    for (k = 0; k < m[0].length; k++) {
                        mm[j][k] = m[j][k];
                    }
                }
                j = m[0].length;
                mm[j] = [];
                for (k = 0; k < m[0].length; k++) {
                    mm[j][k] = m[j + i][k];
                }
                dde[i] = [];
                dde[i] = gorcakic(mm);
            }
            for (j = 0; j < m[0].length; j++) {//harmar gorcakicneri @ntrutyun***pti lracvi
                d[j] = 1;
                t = 0;
                for (i = 0; i < dde.length; i++) {
                    t += dde[i][j];
                }
                if (t <= 0) {
                }
            }
            for (j = 0; j < m[0].length; j++) {//miasnakan gorcakicneri stacum
                de[j] = 0;
                for (i = 0; i < dde.length; i++) {
                    de[j] += dde[i][j];
                }
            }
            for (j = m[0].length; j < textQanak; j++) {
                de[j] = dde[j - m[0].length][m[0].length];
            }//***
            de = minimize(de);
            teghadrum();
        }

        function minimize(de) {//gorcakicneri minimizacia
            var i, k = 2, mini = -1;
            for (i = 0; i < de.length; i++) {
                if ((mini == -1) && (de[i] != 0)) {
                    mini = i;
                } else if ((de[i] != 0) && (Math.abs(de[i]) < Math.abs(de[mini]))) {
                    mini = i;
                }
            }
            while ((k <= Math.abs(de[mini])) && (mini > -1)) {
                bul = true;
                for (i = 0; i < de.length; i++) {
                    if (de[i] % k != 0) {
                        bul = false;
                        break;
                    }
                }
                if (bul) {
                    for (i = 0; i < de.length; i++) {
                        de[i] /= k;
                    }
                } else {
                    k++;
                }
            }
            return de;
        }

        function gorcakic(m) {
            var b = [], d = [], de = [], w = m.length, i, j, k, bul;
            for (i = 0; i < w - 1; i++) {//determinant hashvelu hamar matricaneri stacum
                b[i] = -m[w - 1][i];
            }
            for (i = 0; i < w - 1; i++) {
                d[i] = [];
                for (j = 0; j < w - 1; j++) {
                    d[i][j] = [];
                    if (i != j) {
                        for (k = 0; k < w - 1; k++) {
                            d[i][j][k] = m[j][k];
                        }
                    } else {
                        for (k = 0; k < w - 1; k++) {
                            d[i][j][k] = b[k];
                        }
                    }
                }
            }
            d[w - 1] = [];
            for (i = 0; i < w - 1; i++) {
                d[w - 1][i] = [];
                for (k = 0; k < w - 1; k++) {
                    d[w - 1][i][k] = m[i][k];
                }
            }
            for (i = 0; i < w; i++) {
                de[i] = det(d[i]);
            }
            for (i = 0; i < w - 1; i++) {//verjin tarri zroyi haytnaberum
                bul = true;
                for (j = 0; j < w - 1; j++) {
                    if (m[j][i] != 0) {
                        bul = false;
                        break;
                    }
                }
                if (bul) {
                    de[w - 1] = 0;
                    break;
                }
            }
            bul = true;
            for (i = 0; i < w - 1; i++) {//nuyn@ ughghahayac
                if (m[w - 1][i] != 0) {
                    bul = false;
                    break;
                }
            }
            if (bul) {
                de[w - 1] = 0;
            }
            k = 1;
            if (de[w - 1] < 0) {//gorcakicneri drakanacum
                k = -1;
            } else if (de[w - 1] == 0) {
                for (i = 0; i < w; i++) {
                    if (de[i] < 0) {
                        k = -1;
                        break;
                    }
                }
            }
            for (i = 0; i < w; i++) {
                de[i] *= k;
            }
            de = minimize(de);
            return de;
        }

        function teghadrum() {
            j = 0;
            for (i = 1; i < s.length; i++) {//gorcakicneri teghadrum
                if ((s[i - 1][0] === "s") || (s[i - 1][0] === "+") || (s[i - 1][0] === "=")) {
                    if (s[i][0] == "mt") {
                        if (de[j] != 1) {
                            s[i][1] = de[j];
                            j++;
                        } else {
                            s.splice(i, 1);
                            j++;
                        }
                    } else if (de[j] != 1) {
                        s.splice(i, 0, ["mt", 0, 0]);
                        s[i][1] = de[j];
                        j++;
                    } else {
                        j++;
                    }
                }
            }
            build("new", 0);
        }

        /*t = "<table border='1' cellspacing='0' style='border: 9px double lightsalmon;margin: 10px auto'>";
         for (j = 0; j < m[0].length; j++) {
         t += "<tr><td>" + el[el_t[j]][0] + "</td>";
         for (i = 0; i < textQanak; i++) {
         t += "<td>" + m[i][j] + "</td>";
         }
         t += "</tr>";
         }
         t += "</table>";*/
        //document.getElementById("d").innerHTML += de;
        function det(d1) {//դետերմինանտ
            var d = [], i, i1, j, j1, gum = 0;
            if (d1.length > 1) {
                for (i = 0; i < d1.length; i++) {
                    d.length = 0;
                    j = 0;
                    for (i1 = 0; i1 < d1.length; i1++) {
                        if (i1 != i) {
                            d[j] = [];
                            for (j1 = 1; j1 < d1.length; j1++) {
                                d[j][j1 - 1] = d1[i1][j1];
                            }
                            j++;
                        }
                    }
                    gum += Math.pow(-1, i) * d1[i][0] * det(d);
                }
                return gum;
            } else {
                return parseFloat(d1);
            }
        }
    }
    function tch() {
        alert("Հոպ, էս մասը դեռ սարքած չի");
    }
    function fotText(id) {
        var i, j, y, k, inx = [];
        y = document.getElementById("x" + id).value;
        y = parseFloat(y);
        if (!isNaN(y)) {
            j = 0;
            for (i = 0; i < z.length; i++) {
                if ((z[i][0] !== "+") && (z[i][0] !== "=")) {
                    inx[j] = i;
                    j++;
                }
            }
            k = y / (z[inx[id - 1]][1] * z[inx[id - 1]][2]);
            //alert(k);
            for (i = 1; i < id; i++) {
                document.getElementById("x" + i).value = (z[inx[i - 1]][2] * z[inx[i - 1]][1] * k).toPrecision(5);
            }

            for (i = id + 1; i <= textQanak; i++) {
                document.getElementById("x" + i).value = (z[inx[i - 1]][2] * z[inx[i - 1]][1] * k).toPrecision(5);
            }
        }
    }
    //el.f("C:/Users/ВМ/Desktop/fayl.txt");
    //cf_random();
    function cf_random() {
        var text = 'как записать строку в файл ".txt" с помощью js?';
        document.write('<a href="data:text/plain;charset=utf-8,' + encodeURIComponent(text) + '" download="text.txt">text.txt</a>');
    }
    document.write("pz pz tz tz");
</script>

</body>
</html>